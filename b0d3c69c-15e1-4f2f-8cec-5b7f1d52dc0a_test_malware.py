# test_malware.py
import time
import os
import socket
import subprocess

def create_file():
    os.makedirs("malware_test", exist_ok=True)
    with open("malware_test/test_file.txt", "w") as f:
        f.write("This is a test file created by malware.\n")

def delete_file():
    time.sleep(2)  # Simulate some delay
    if os.path.exists("malware_test/test_file.txt"):
        os.remove("malware_test/test_file.txt")

def create_random_process():
    sleep_process = subprocess.Popen(["sleep", "15"])
    
    # You could also create multiple processes if you want
    echo_process = subprocess.Popen(["echo", "This is a detectable subprocess"])
    # Simulate new process by creating a random number
    os.system("echo 'Random process created'")

def simulate_network_activity():
    time.sleep(5)
    # Simulate network activity by opening a socket (no actual network connection)
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect(("localhost", 8000))  # Connect to a dummy port (no actual server running)
    s.close()

if __name__ == "__main__":
    create_file()
    delete_file()
    create_random_process()
    simulate_network_activity()
